= Setup Service Interconnect in Globex DB namespace

:imagesdir: ../../assets/images

++++
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X0GBQ47NJJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X0GBQ47NJJ');
</script>

<style>
    .underline {
    cursor: pointer;
    }

    .nav-container {
    display: none !important;
    }

    .doc {    
    max-width: 70rem !important;
    }
</style>
++++

:icons: font 
:sectnums:

Similar to the Web App site, you will set up the site and routers on DB Namespace using the Red Hat Service Interconnect command line interface.


== Create Red Hat Service Interconnect Site

. In the terminal, run the following command to create a site to set up the VAN routers.
+
[source,sh,role="execute",subs=attributes+]
----
skupper site create globex-skupper-db-user1 -n globex-skupper-db-{user_name}
----
+
.Output
[source,textinfo,subs="attributes"]
----
Waiting for status...
Site "globex-skupper-db-user1" is ready.
----


== Create a connector

[.concept]
.What is a connector?
****
A connector links a local workload to listeners in remote sites using routing keys. The routing key is a string identifier that binds the connector to matching listeners in remote sites.
****

image:skupper/listener-connector.png[width=70%] 

. In terminal, run the following command to create a connector for the database.
+
[source,sh,role="execute",subs=attributes+]
----
skupper connector create globex-db 5432 --workload deployment/globex-db -n globex-skupper-db-{user_name}

----
+
.Output
[source,textinfo,subs="attributes"]
----
Waiting for create to complete...
Connector "globex-db" is configured.
----

. To see the status of the skupper network
+
[source,bash,role=execute,subs="attributes"]
----
skupper connector -n globex-skupper-db-{user_name} status
----
. The Status shows as *Pending* and the message states that *No matching listeners*. This because the  connector is still in *Pending* state since the access token is not yet redeemed.


== Visualise set up on Red Hat Service Interconnect Network Console

Before proceeding to the final step of creating the Virtual Application Network, navigate to the https://skupper-network-observer-globex-skupper-{user_name}.{openshift_subdomain}/[Service Interconnect Network Console, window="network-console"] to visualize the Virtual Application Network based on the configuration you've set up so far.


. Click on *Log in with OpenShift*, and login as *({user_name}/{user_password})*. 

. Click *Allow selected permissions*.
+
image::skupper/allow_permission.png[]

. You will only be able to see the OpenShift cluster (globex-skupper-{user_name} namespace) for the moment. This is because the database namespace is not yet part of the Virtual Application Network.
+
image::skupper/network-console-initial.png[]

